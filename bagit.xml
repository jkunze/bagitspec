<?xml version='1.0' ?>
<!--
==== TO DO:  ====
Rules for encoding newlines and whitespace in filenames?

Change "algorithm" (crypto hash) to "function"? (Steffen Fritz email to jak)

-->

<!--See http://xml.resource.org/ for formatting tools that can deal with
    this RFC2629 (and beyond) XML format.
 -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [

  <!ENTITY mdash '&#8212;' >

  <!ENTITY rfc1321 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.1321.xml'>
  <!ENTITY rfc2119 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>
  <!ENTITY rfc3174 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3174.xml'>
  <!ENTITY rfc3629 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3629.xml'>
  <!ENTITY rfc3986 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3986.xml'>

	<!-- RFC 2119 entities - for convenience -->
	<!ENTITY must 'MUST' >
	<!ENTITY must-not 'MUST NOT' >
	<!ENTITY required 'REQUIRED' >
	<!ENTITY shall 'SHALL' >
	<!ENTITY shall-not 'SHALL NOT' >
	<!ENTITY should 'SHOULD' >
	<!ENTITY should-not 'SHOULD NOT' >
	<!ENTITY recommended 'RECOMMENDED' >
	<!ENTITY may 'MAY' >
	<!ENTITY optional 'OPTIONAL' >

	<!-- The current bagit version, for convenience. -->
	<!ENTITY current-bagit-version '1.00' >
]>

<?xml-stylesheet type="text/xsl" href="rfc2629xslt/rfc2629.xslt" ?>

<?rfc comments="no"?>
<?rfc inline="yes"?>
<?rfc symrefs="yes"?>
<?rfc toc="yes"?>

<!-- The next line is "on" by default, but the makefile turns it off
     in favor of the line after it when preparing an IETF draft -->

<!--#if internet-draft dont --> <?rfc private="NDIIPP Content Transfer Project"?> <rfc>
<!-- reducing docName from URL to old-style draft name in hopes of clearing
     the automatic I-D submission process; if it works, I'm not sure
     automatic submission is worth depriving readers of the full URL -->
<!--#if internet-draft then <rfc ipr="trust200902" docName="draft-A-S-00.txt"> -->
 <front>

  <title abbrev="BagIt">
   The BagIt File Packaging Format (V&current-bagit-version;)
  </title>

  <author initials="A." surname="Boyko"
          fullname="Andy Boyko">
   <address>
    <postal>
     <street>1438 Kingfisher Way</street>
     <city>Sunnyvale</city> <region>CA</region>
     <code>94087</code>
     <country>USA</country>
    </postal>
    <email>andy@boyko.net</email>
   </address>
  </author>

  <author initials="J." surname="Kunze"
          fullname="John A. Kunze">
   <organization>
    California Digital Library
   </organization>
   <address>
    <postal>
     <street>415 20th St, 4th Floor</street>
     <city>Oakland</city> <region>CA</region>
     <code>94612</code>
     <country>US</country>
    </postal>
    <email>jak@ucop.edu</email>
   </address>
  </author>

  <author initials="J." surname="Littman"
          fullname="Justin Littman">
   <organization>
    George Washington University Libraries
   </organization>
   <address>
    <postal>
     <street>2130 H St NW</street>
     <city>Washington</city> <region>DC</region>
     <code>20052</code>
     <country>USA</country>
    </postal>
    <email>jlit@loc.gov</email>
   </address>
  </author>

  <author initials="E." surname="Summers"
          fullname="Ed Summers">
   <organization>
    University of Maryland
  </organization>
   <address>
    <postal>
     <street>4130 Campus Drive</street>
     <city>College Park</city> <region>MD</region>
     <code>20742</code>
     <country>USA</country>
    </postal>
    <email>ehs@pobox.com</email>
   </address>
  </author>

  <author initials="L." surname="Madden"
          fullname="Liz Madden">
   <organization>
    Library of Congress
   </organization>
   <address>
    <postal>
     <street>101 Independence Avenue SE</street>
     <city>Washington</city> <region>DC</region>
     <code>20540</code>
     <country>USA</country>
    </postal>
    <email>emad@loc.gov</email>
   </address>
  </author>

  <author initials="J." surname="Scancella"
          fullname="John Scancella">
   <organization>
    Library of Congress
   </organization>
   <address>
    <postal>
     <street>101 Independence Avenue SE</street>
     <city>Washington</city> <region>DC</region>
     <code>20540</code>
     <country>USA</country>
    </postal>
    <email>jsca@loc.gov</email>
   </address>
 </author>

  <author initials="C." surname="Adams"
          fullname="Chris Adams">
   <organization>
    Library of Congress
   </organization>
   <address>
    <postal>
     <street>101 Independence Avenue SE</street>
     <city>Washington</city> <region>DC</region>
     <code>20540</code>
     <country>USA</country>
    </postal>
    <email>cadams@loc.gov</email>
   </address>
 </author>

  <author initials="B." surname="Vargas"
          fullname="Brian Vargas">
   <address>
    <postal>
     <street>1354 Quincy St. NW</street>
     <city>Washington</city> <region>DC</region>
     <code>20011</code>
     <country>USA</country>
    </postal>
    <email>brian@ardvaark.net</email>
   </address>
  </author>

  <date day="6" month="December" year="2016" />

  <abstract>

<t>
This document specifies BagIt, a hierarchical file packaging format for
storage and transfer of arbitrary digital content.  A "bag" has just enough
structure to enclose descriptive "tags" and a "payload" but
does not require knowledge of the payload's internal semantics.  This
BagIt format should be suitable for disk-based or network-based storage and
transfer.
</t>

  </abstract>

 </front>

<middle>
<section title="Introduction">
<section title="Purpose">
<t>
BagIt is a hierarchical file packaging format designed to support
disk-based or network-based storage and transfer of arbitrary digital
content.  A bag consists of a "payload" and "tags".  The content of the payload
is the custodial focus of the bag and is treated as semantically opaque.
The "tags" are metadata files intended to facilitate and document the storage
and transfer of the bag.  The name, BagIt, is inspired by the "enclose and deposit" method
<xref target="ENCDEP" />, sometimes referred to as "bag it and tag it".
</t>

<!-- TODO: Move this section into the Interoperabiliyt section. -->
<t>
Implementors of BagIt tools should consider interoperability
between different platforms, operating systems, toolsets, and languages.
Differences in path separators, newline characters, reserved
file names, and maximum path lengths are all possible barriers to
moving bags between different systems.  Discussion of these issues may be
found in the Interoperability section of this document.
</t>
</section> <!-- /Purpose -->

<section title="Requirements">
<t>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in <xref target="RFC2119"/>.
</t>

<t>
An implementation is not compliant if it fails to satisfy one or
more of the MUST or REQUIRED level requirements for the protocols
it implements.
</t>
</section> <!-- /Requirements -->

<section title="Terminology">
<t>
This specification uses a number of terms to describe BagIt, some
of which are in common use, some of which are newly defined by this
specification, and others which may have meanings obvious only
to those in the community from which this spec arose.  Terms defined
in this section are intended to clarify any ambiguity.
</t>

<t>
<list style="hanging">
	<t hangText="bag">
	A set of opaque data contained within the structure defined
	by this specification.
	</t>

	<t hangText="bag declaration">
	The tag file required to be in all bags conforming to this
	specification.  Contains tags necessary for bootstrapping the
	reading and processing of the rest of a bag.  See <xref target="sec-bag-decl"/>.
	</t>

	<t hangText="bag checksum algorithm">
	A reference to a cryptographic checksum algorithm, such as MD5 or
        SHA-1, with its name normalized for use in a manifest or tag
        manifest file name.  See <xref target="bag-checksum-algorithms" />.
	</t>

        <t hangText="complete">
        A bag which comprises all elements required by this specification,
        with all files listed in all payload and tag manifests present,
        all payload files present listed in all manifests.  See
        <xref target="sec-complete-valid" />.
        </t>

	<t hangText="payload">
	The data encapsulated by the bag.  The contents of the payload
        are opaque to this specification, and are always considered as a
        set of octet streams.  See <xref target="sec-payload-dir" />.
	</t>

	<t hangText="serialized bag">
	A bag that has been serialized into a single, monolithic file.  See
	<xref target="sec-serialization"/>.
	</t>

	<t hangText="tag directory">
	A directory that contains one or more tag files.
	</t>

	<t hangText="tag file">
	A file that contains metadata intended to facilitate and document
        the storage and transfer of the bag.
	</t>

    <t hangText="valid">
    A complete bag wherein every checksum in every payload manifest and
    tag manifest can be successfully verified against the corresponding
    payload file.  See <xref target="sec-payload-dir" />.
    </t>
</list>
</t>
</section> <!-- /Terminology -->

<!-- TODO -->
<!--
<section title="Overview of Operation">
<t>
</t>
</section>
--> <!-- /Overview of Operation -->
</section> <!-- /Introduction -->

<section title="Structure">
<t>
A bag consists of a base directory containing (1) a set of required
and optional tag files; (2) a sub-directory named "data", called the payload
directory; and (3) a set of optional tag directories. The payload files in the
payload directory are an arbitrary file hierarchy
(see <xref target="sec-payload-dir" />).
The tag files in the base directory consist of one or more files named
"manifest-<spanx style="emph">algorithm</spanx>.txt"
(see <xref target="sec-payload-manifest" />), a file named "bagit.txt"
(see <xref target="sec-bag-decl" />), and zero or more additional tag
files (see <xref target="sec-optional-elements" />). The tag files in the
optional tag directories are arbitrary file hierarchies and the tag directories
&may; have any name that is not reserved for a file or directory in this specification.
</t>

<t>
The base directory &may; have any name.
</t>

<figure>
 <artwork>
        &lt;base directory&gt;/
        |   bagit.txt
        |   manifest-&lt;algorithm&gt;.txt
        |   [optional additional tag files]
        \--- data/
              |   [payload files]
        \--- [optional tag directories]/
              |   [optional tag files]
 </artwork>
</figure>

<section title="Required Elements" anchor="sec-required-elements">
<section title="Bag Declaration: bagit.txt" anchor="sec-bag-decl">
<t>
The "bagit.txt" tag file &must; consist of exactly two lines:

<figure>
 <artwork>
BagIt-Version: M.N
Tag-File-Character-Encoding: UTF-8
 </artwork>
</figure>

where M.N identifies the BagIt major (M) and minor (N) version numbers,
and UTF-8 identifies the character set encoding of tag files.  The bag
declaration &must; be encoded in UTF-8, and &must-not; contain a byte-order
mark (BOM).
<xref target="RFC3629"/>
</t>

<t>
The appropriate version for a bag that conforms to
this version of the specification is "&current-bagit-version;".
</t>
</section>	<!-- /Bag Declaration -->

<section title="Payload Directory: data/" anchor="sec-payload-dir">
<t>
The base directory &must; contain a sub-directory named "data", called the
payload directory.
</t>

<t>
The payload directory contains the custodial content within the bag.
The files under the payload directory are called payload files, or
the payload.
The payload is treated as octet streams for all purposes relating to this
specification, and is not otherwise prescribed.
</t>
</section> <!-- /Payload Directory -->

<section title="Payload Manifest: manifest-&lt;alg&gt;.txt" anchor="sec-payload-manifest">
<!-- WARNING: This section should be kept in relative sync with the
              section on Tag Manifests.
-->
<t>
A payload manifest is a tag file that lists payload files and checksums for those
payload files generated using a particular bag checksum algorithm.
Every bag &must; contain one payload manifest file, and &may; contain
more than one. If there is more than one, each payload manifest
file must list all payload files. A payload manifest file &must;
have a name of the form manifest-<spanx style="emph">algorithm</spanx>.txt, where
<spanx style="emph">algorithm</spanx> is a string specifying
the bag checksum algorithm used in that manifest, such as:
</t>

<figure>
 <artwork>
manifest-md5.txt
manifest-sha1.txt
 </artwork>
</figure>

<t>A bag &must-not; contain more than one payload manifest for a particular
bag checksum algorithm.</t>
<t>
Each line of a payload manifest file &must; be of the form:
</t>

<figure>
 <artwork>
CHECKSUM FILENAME
 </artwork>
</figure>

<t>
where FILENAME is the pathname of a file relative to the base directory,
 and CHECKSUM is a hex-encoded checksum calculated according to <spanx
  style="emph">algorithm</spanx> over every octet in the file.
The hex-encoded checksum &may; use uppercase and/or lowercase letters.  The slash
character ('/') &must; be used as a path separator in FILENAME. One
or more linear whitespace characters (spaces or tabs) &must; separate
CHECKSUM from FILENAME. There is no limitation on the length of a pathname.
The payload manifest &must-not; reference files outside the payload directory. If
a FILENAME includes a newline (LF), a carriage return (CR), or carriage
return plus newline (CRLF) it &must; be percent-encoded
<xref target="RFC3986"/>.

</t>

<t>
Payload manifests only include the pathnames of files.  Because of this,
a payload manifest cannot reference empty directories.  To account for
an empty directory, a bag creator may wish to include at least one file
in that directory; it suffices, for example, to include a zero-length
file named ".keep".
</t>
</section> <!-- /Payload Manifest -->
</section> <!-- /Required Elements -->

<section title="Optional Elements" anchor="sec-optional-elements">
<section title="Tag Manifest: tagmanifest-&lt;alg&gt;.txt">
<!-- WARNING: This section should be kept in relative sync with the
              section on Payload Manifests.
-->
<t>
A tag manifest is a tag file that lists other tag files and checksums for
those tag files generated using a particular bag checksum algorithm.
A bag &may; contain one or more tag manifests.
A tag manifest file &must; have a name of the form
"tagmanifest-<spanx style="emph">algorithm</spanx>.txt", where
<spanx style="emph">algorithm</spanx> is a string specifying
the bag checksum algorithm used in that manifest, such as:
</t>

<figure>
 <artwork>
tagmanifest-md5.txt
tagmanifest-sha1.txt
 </artwork>
</figure>

<t>
A tag manifest file has the same form as the payload file manifest
file described in <xref target="sec-payload-manifest" />,
but &must-not; list any payload files.
As a result, no FILENAME listed in a tag manifest begins "data/".
</t>

</section> <!-- /Tag Manifest -->

<section title="Bag Metadata: bag-info.txt">

<t>
The "bag-info.txt" file is a tag file that contains metadata elements
describing the bag and the payload.  The metadata elements contained in
the "bag-info.txt" file are intended primarily for human readability.
All metadata elements are optional and &may; be repeated. Implementations
&must; assume that the ordering is significant and provide access to the
metadata elements in the order they are given in the "bag-info.txt" file.
</t>
<t>
A metadata element &must; consist of a label, a colon, and a value,
each separated by optional whitespace.  It is &recommended; that
lines not exceed 79 characters in length. Long values may be continued
onto the next line by inserting a newline (LF), a carriage return (CR),
or carriage return plus newline (CRLF) and indenting the next line with
linear white space (spaces or tabs).
</t>
<t>
A implementation &may; assume the metadata element Payload-Oxum exists
for the purpose of quickly verifying the bag. If it does exist it &must;
be in the form as defined as follows:
</t>
<t hangText="Payload-Oxum">
    The "octetstream sum" of the payload, namely, a two-part number
    of the form "OctetCount.StreamCount", where OctetCount is the
    total number of octets (8-bit bytes) across all payload file content
    and StreamCount is the total number of payload files.  Payload-Oxum
    should be included in "bag-info.txt" if at all
    possible.  Compared to Bag-Size (above), Payload-Oxum is
    intended for machine consumption.
</t>

<t>
Here is an example "bag-info.txt" file.

<figure>
 <artwork>
    Source-Organization: Spengler University
    Organization-Address: 1400 Elm St., Cupertino, California, 95014
    Contact-Name: Edna Janssen
    Contact-Phone: +1 408-555-1212
    Contact-Email: ej@spengler.edu
    External-Description: Uncompressed greyscale TIFF images from the
         Yoshimuri papers colle...
    Bagging-Date: 2008-01-15
    External-Identifier: spengler_yoshimuri_001
    Bag-Size: 260 GB
    Payload-Oxum: 279164409832.1198
    Bag-Group-Identifier: spengler_yoshimuri
    Bag-Count: 1 of 15
    Internal-Sender-Identifier: /storage/images/yoshimuri
    Internal-Sender-Description: Uncompressed greyscale TIFFs created
         from microfilm and are...
 </artwork>
</figure>
</t>

</section> <!-- /Bag Metadata -->

<section title="Other Tag Files" anchor="sec-other-tag-files">
<t>
A bag &may; contain other tag files that are not defined by this
specification.
Implementations &should; ignore the content of any unexpected tag files,
except when they are listed in a tag manifest.
When unexpected tag files are listed in a tag manifest, implementations
&must; only treat the content of those tag files as octet streams for the
purpose of checksum verification.
</t>
</section> <!-- /Other Tag Files -->
</section> <!-- /Optional Elements -->

<section title="Text Tag File Format" anchor="sec-tag-files">
<t>
All tag files specifically described in this specification &must; adhere to
the text tag file format described below. Other tag files &may; adhere to
the text tag file format described below.
</t>
<t>
Text tag files are line-oriented, and each line &must; be
terminated by a newline (LF), a carriage return (CR), or carriage return
plus newline (CRLF).
Text tag files &must; end in the extension ".txt".
</t>

<t>
In all text tag files except for the bag declaration file, text &must; be
encoded in the character encoding specified in the "bagit.txt" bag declaration
file. Text tag files except for the bag declaration file &may; include a
byte-order mark (BOM) only if the specified encoding requires it for
proper decoding. In accordance with <xref target="RFC3629"/>, when "bagit.txt"
specifies UTF-8 the tag files &must-not; begin with a byte-order mark (BOM).
</t>

<t>
As specified in <xref target="sec-bag-decl"/>, the bag declaration
file must be encoded in UTF-8 and must not include a byte-order mark.
</t>

<!-- TODO: Character escaping -->
<!--
<t>
The backslash character ('\', U+005C) escapes from special processing any
</t>
-->
</section> <!-- /Tags Files -->

<section title="Bag Checksum Algorithms" anchor="bag-checksum-algorithms">
<t>
The payload manifest and tag manifests assert integrity of the payload
and tags in a bag using checksum algorithms.  The operation
of those algorithms, and the formatting of their output within a manifest
file, are generally beyond the scope of this specification, except that the
output format &must; be able to fit in the manifest format specified in
<xref target="sec-payload-manifest"/>.
</t>

<t>
The name of the checksum algorithm &must; be normalized for use in the
manifest's filename by lowercasing the common name of the algorithm and
removing all non-alphanumeric characters.
</t>

<t>
Implementors of tools that create and validate bags &should; support at
least two widely implemented checksum algorithms: "md5"
<xref target="RFC1321"/> and "sha1" <xref target="RFC3174"/>.
</t>
</section> <!-- /Bag Checksum Algorithms -->

</section> <!-- /Bag Structure -->

<section title="Complete, Incomplete, and Valid bags" anchor="sec-complete-valid">
<t>
A <spanx style="emph">complete</spanx> bag &must; have the following
attributes:
</t>

<t>
<list style="numbers">
	<t>Every required element &must; be present
	   (<xref target="sec-required-elements" />).</t>
	<t>Every file in every payload manifest &must; be present.</t>
	<t>Every file in every tag manifest &must; be present.
	   Tag files not listed in a tag manifest &may; be present.</t>
         <t>Every payload file &must; be listed in all manifests.</t>
        <t>Every element present &must; comply with this specification.</t>
</list>
</t>

<t>
A bag is <spanx style="emph">incomplete</spanx> when it exhibits any of
the following exceptions to the attributes of a complete bag:
</t>

<t>
<list style="numbers">
	<t>One or more files in any payload manifest are absent.</t>
	<t>One or more files in any tag manifest are absent.</t>
</list>
</t>

<t>
A <spanx style="emph">valid</spanx> bag must have the following
attributes:
</t>

<t>
<list style="numbers">
	<t>The bag &must; be complete.</t>
	<t>Every CHECKSUM in every payload manifest and tag manifest
	   can be sucessfully verified against the contents of its
           corresponding FILENAME.</t>
</list>
</t>

<t>
If a bag is neither valid, complete, nor incomplete, it is
<spanx style="emph">invalid</spanx>.  Definitions for the various
ways a bag may be invalid are not covered by this specification.
</t>

<t>
Tag files that do not appear in a tag manifest can be modified, added
to, or removed from a bag without impacting the completeness or validity
of the bag.
</t>

</section> <!-- Completeness and validity -->

<section title="Serialization" anchor="sec-serialization">

<t>
In some scenarios, it may be convenient to serialize the
bag's filesystem hierarchy (i.e., the base directory) into a
single-file archive format such as TAR or ZIP (the serialization) and then
later deserialize the serialization to recreate the filesystem  hierarchy.
Several rules govern the serialization of a bag and apply equally
to all types of archive files:
</t>

<t>
<list style="numbers">
<t>
The top-level directory of a serialization &must; contain only one bag.
</t>
<t>
The serialization &should; have the same name as the bag's base directory,
but &must; have an extension added to identify the format.  For example, the
receiver of "mybag.tar.gz" expects the corresponding base directory
to be created as "mybag".
</t>
<t>
A bag &must-not; be serialized from within its base directory, but from the
parent of the base directory (where the base directory appears as an
entry).  Thus, after a bag is deserialized in an empty directory,
a listing of that directory shows exactly one entry.  For example,
deserializing "mybag.zip" in an empty directory causes the creation
of the base directory "mybag" and, beneath "mybag", the creation of
all payload and tag files.
</t>
<t>
The deserialization of a bag &must; produce a single base directory
bag with the top-level structure as described in this specification without
requiring any additional un-archiving step.  For example, after one
un-archiving step it would be an error for the "data/" directory to
appear as "data.tar.gz".  TAR and ZIP files may appear inside the payload
beneath the "data/" directory, where they would be treated
as any other payload file.
</t>
</list>
</t>

<t>
When serializing a bag, care must be taken to
ensure that the archive format's restrictions on file naming, such as allowable
characters, length, or character encoding, will support the
requirements of the systems on which it will be used.  See
<xref target="sec-interoperability" />.
</t>

</section> <!-- /Serialization -->

<section title="Examples">
<section title="Example of a basic bag">

<t>
This is the layout of a basic bag containing an image and a companion
OCR file.  Lines of file content are shown in parentheses beneath the
file name.

<!-- Note that the artwork looks funky on the version line, to account
	 for the fact that the entity value is much shorter than the entity
	 name. -->
<figure>
 <artwork>
myfirstbag/
|
|   manifest-md5.txt
|    (49afbd86a1ca9f34b677a3f09655eae9 data/27613-h/images/q172.png)
|    (408ad21d50cef31da4df6d9ed81b01a7 data/27613-h/images/q172.txt)
|
|   bagit.txt
|    (BagIt-version: 0.96                                          )
|    (Tag-File-Character-Encoding: UTF-8                           )
|
\--- data/
     |
     |   27613-h/images/q172.png
     |    (... image bytes ...                                     )
     |
     |   27613-h/images/q172.txt
     |    (... OCR text ...                                        )
     ....
 </artwork>
</figure>

</t>
</section>

</section> <!-- /Examples -->

<section title="Security Considerations" anchor="sec-security">

<section title="Special directory characters">
<!-- Added by Brian Vargas, 2009-04-09 -->
<t>
The paths specified in the payload manifest, and tag manifest
file do not prohibit special directory characters which might be
significant on implementing systems.  Implementors &should; take care that
files outside the bag directory structure are not accessed when reading or
writing files based on paths specified in a bag.
</t>

<t>
For example, path characters such as ".." or "~"
in a maliciously crafted "tagmanifest-md5.txt" file might cause a naive implementation to
overwrite critical system files.
</t>
</section>
</section> <!-- End Section: Security considerations -->

<section title="Practical Considerations (non-normative)">
<section title="Disk and network transfer">

<t>
When creating a bag on physical media (such as hard disk, CD-ROM, or
DVD) for transfer to another organization, the sender should select
and format the media in a manner compatible with both the content
requirements (e.g., file names and sizes) and the receiver's technical
infrastructure.  If the receiver's infrastructure is not known or the
media needs to be compatible with a range of potential receivers,
consideration should be given to portability and common usage.  For
example, a "lowest common denominator" for some potential receivers
could be USB disk drives formatted with the FAT32 filesystem.
</t>

<t>
Although overall bag size is unlimited in principle, network-based
transfers may involve constraints on the amount of bag data that a
receiver can receive at one time.  It may be practical to split a
large bag into several smaller bags.
</t>

<t>
The mechanics of sending and receiving bags over networks is otherwise
out of scope of the present document and may be facilitated by protocols
such as <xref target="GRABIT" /> and <xref target="SWORD" />.
</t>

</section> <!-- /Network and Disk Transfers -->

<section title="Interoperability" anchor="sec-interoperability">

<t>
This section is not part of the BagIt specification.  It describes some
practical considerations for bag creators and receivers circa 2016.
</t>

<section title="Checksum tools" anchor="sec-checksum-tools">

<t>
Some cautions regarding bag interchange arise in regard to the
commonly available checksum tools distributed with the GNU Coreutils
package (md5sum, sha1sum, etc.), collectively referred to here as
"md5sum".  First, md5sum can be run in binary or text
mode; text mode sometimes normalizes line-endings.  While these
modes appear to produce the same checksums under Unix-like systems, they
can produce different checksums under Windows.  When using md5sum, you
&should; always run it in binary mode.
</t>

<t>
Due to the widespread use of md5sum (and its relatives), it is not
unexpected for bag receivers to see manifests in which CHECKSUM and
FILENAME are separated by a space followed by an asterisk.  Implementors
creating or processing bags with md5sum should be aware of these subtle
differences, and ensure compliance with the manifest specification in this
document.  Implementors creating and processing bags with other tools may wish
to be tolerant of asterisks found in the manifests.
</t>

<t>A final note about md5sum-generated manifests is that for a
FILENAME containing a backslash ('\'), the manifest line will have a
backslash inserted in front of the CHECKSUM and, under Windows, the
backslashes inside FILENAME may be doubled.
</t>

</section>

<section title="Windows and Unix file naming">

<t>
As specified above, only the Unix-based path separator ('/') may be
used inside filenames listed in BagIt manifests files.
When bags are exchanged between Windows and Unix platforms, care should
be taken to translate the path separator as needed.  Receivers of bags on
physical media should be prepared for filesystems created under either
Windows or Unix.  Besides the fundamental difference between path
separators ('\' and '/'), generally, Windows filesystems have more
limitations than Unix filesystems.  Windows path names have a maximum of
255 characters, and none of these characters may be used in a path
component:

<figure>
 <artwork>
    &lt; &gt; : " / | ? *
 </artwork>
</figure>

Windows also reserves the following names:  CON, PRN, AUX, NUL, COM1,
COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT1, LPT2, LPT3, LPT4,
LPT5, LPT6, LPT7, LPT8, and LPT9.  See <xref target="MSFNAM" /> for more
information.
</t>

</section>

</section> <!-- /Interoperability -->
</section> <!-- /Practical Considerations -->

<section title="Acknowledgements">

<t>
BagIt owes much to many thoughtful contributers and reviewers, including
Stephen Abrams, Mike Ashenfelder, Dan Chudnov, Brad Hards, Scott Fisher, Keith Johnson, Erik
Hetzner, Leslie Johnston, David Loy, Mark Phillips, Tracy Seneca, Brian Tingle, Adam Turoff, and Jim Tuttle.
</t>

<section title="IANA Considerations">

<t>
This draft does not request any action from IANA.
</t>

</section>

</section>

 </middle>

 <back>
   <references>

    <reference anchor="ENCDEP"
      target="http://www.iwaw.net/05/papers/iwaw05-tabata.pdf">
     <front>
       <title>A Collaboration Model between Archival Systems to Enhance
       the Reliability of Preservation by an Enclose-and-Deposit Method</title>
       <author initials="K." surname="Tabata" fullname="Koichi Tabata" />
       <date month="" year="2005" />
     </front>
     <format type="PDF"
       target="http://www.iwaw.net/05/papers/iwaw05-tabata.pdf" />
    </reference>

    <reference anchor="GRABIT"
      target="http://dot.ucop.edu/home/jak/grabitspec.html">
     <front>
       <title>The GrabIt File Exchange Protocol</title>
       <author surname="NDIIPP/CDL" fullname="NDIIPP/CDL" />
       <date month="" year="2008" />
     </front>
     <format type="HTML"
      target="http://dot.ucop.edu/home/jak/grabitspec.html" />
    </reference>

    <reference anchor="MSFNAM"
      target="http://msdn2.microsoft.com/en-us/library/aa365247.aspx">
     <front>
       <title>Naming a File</title>
       <author surname="Microsoft" fullname="Microsoft Developer Network" />
       <date month="" year="2008" />
     </front>
     <format type="HTML"
      target="http://msdn2.microsoft.com/en-us/library/aa365247.aspx" />
    </reference>

    &rfc1321; <!-- MD5 -->
    &rfc2119; <!-- Requirements -->
    &rfc3174; <!-- SHA-1 -->
    &rfc3629; <!-- utf-8 -->
    &rfc3986; <!-- URLs -->

    <reference anchor="SWORD"
      target="http://www.ukoln.ac.uk/repositories/digirep/index/SWORD">
     <front>
       <title>Simple Web-service Offering Repository Deposit (SWORD)</title>
       <author surname="UKOLN/JISC CETIS" fullname="UKOLN/JISC CETIS" />
       <date month="" year="2008" />
     </front>
     <format type="HTML"
      target="http://www.ukoln.ac.uk/repositories/digirep/index/SWORD" />
    </reference>

  </references>

 </back>

</rfc>
